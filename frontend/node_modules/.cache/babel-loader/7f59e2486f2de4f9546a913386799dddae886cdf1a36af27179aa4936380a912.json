{"ast":null,"code":"import _slicedToArray from\"/Users/richy_air/Documents/project/ecommerece/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{Form,Button}from'react-bootstrap';import Loader from'../components/Loader';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{useDispatch,useSelector}from'react-redux';import{getUserDetails,updateUser}from'../actions/userActions';import{useParams}from'react-router-dom';import*as cons from'../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserEditScreen(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setAdmin=_useState6[1];var params=useParams();var userId=params.id;var location=useLocation();var navigate=useNavigate();var dispatch=useDispatch();var userDetails=useSelector(function(state){return state.userDetails;});var error=userDetails.error,loading=userDetails.loading,user=userDetails.user;var userUpdate=useSelector(function(state){return state.userUpdate;});var error_update=userUpdate.error,loading_update=userUpdate.loading,success_update=userUpdate.success;useEffect(function(){if(success_update){dispatch({type:cons.USER_UPDATE_RESET});navigate('/admin/userlist');}else{if(!user.name||user._id!==Number(userId)){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setAdmin(user.isAdmin);}}},[userId,user,success_update,navigate]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateUser({_id:user._id,name:name,email:email,isAdmin:isAdmin}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/userlist/\",children:\" Go Back \"}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Edit User \"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error,\" \"]}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Name \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter Name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Email Address \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"isadmin\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Is Admin\",checked:isAdmin,onChange:function onChange(e){return setAdmin(e.target.checked);}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","Form","Button","Loader","Message","FormContainer","useDispatch","useSelector","getUserDetails","updateUser","useParams","cons","UserEditScreen","name","setName","email","setEmail","isAdmin","setAdmin","params","userId","id","location","navigate","dispatch","userDetails","state","error","loading","user","userUpdate","error_update","loading_update","success_update","success","type","USER_UPDATE_RESET","_id","Number","submitHandler","e","preventDefault","target","value","checked"],"sources":["/Users/richy_air/Documents/project/ecommerece/backend/frontend/src/screens/UserEditScreen.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Link, useNavigate, useLocation } from 'react-router-dom'\nimport {Form, Button} from 'react-bootstrap'\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\nimport FormContainer from '../components/FormContainer'\nimport {useDispatch, useSelector } from 'react-redux'\nimport { getUserDetails, updateUser } from '../actions/userActions'\nimport { useParams } from 'react-router-dom'\nimport * as cons from '../constants/userConstants'\n\nexport default function UserEditScreen() {\n    const [name, setName] = useState('')\n    const [email, setEmail] = useState('')\n    const [isAdmin, setAdmin] = useState(false)\n\n    const params  = useParams()\n    const userId = params.id\n\n    const location = useLocation()\n    const navigate = useNavigate(); \n    const dispatch = useDispatch()\n\n   \n    const userDetails = useSelector(state => state.userDetails)\n    const {error, loading, user} =  userDetails\n\n    const userUpdate = useSelector(state => state.userUpdate)\n    const {error: error_update, loading: loading_update, success: success_update} =  userUpdate\n    \n    useEffect(() => {\n\n        if(success_update){\n            dispatch({type: cons.USER_UPDATE_RESET})\n            navigate('/admin/userlist')\n        }else{\n\n            if(!user.name || user._id !== Number(userId)){\n                    dispatch(getUserDetails(userId))\n            }else{\n                setName(user.name)\n                setEmail(user.email)\n                setAdmin(user.isAdmin)\n            }\n        }      \n    }, [userId, user, success_update, navigate])\n\n\n\n    const submitHandler = (e) => { \n        e.preventDefault()\n        dispatch(updateUser({_id: user._id, name, email, isAdmin}))\n    }\n\n    return ( \n        <div> \n            <Link to='/admin/userlist/'> Go Back </Link> \n            <FormContainer>\n                <h1> Edit User </h1>\n                {loading? <Loader /> : error ? <Message variant='danger'> {error} </Message> \n                    :(\n                        <Form onSubmit={submitHandler}> \n\n                            <Form.Group controlId ='name'>\n                                <Form.Label> Name </Form.Label>\n                                <Form.Control     \n                                                \n                                    type=\"name\"\n                                    placeholder =\"Enter Name\"\n                                    value = {name}\n                                    onChange = {(e) => setName(e.target.value)}\n                                > \n                                </Form.Control>\n                            </Form.Group>\n        \n                            <Form.Group controlId ='email'>\n                                <Form.Label> Email Address </Form.Label>\n                                <Form.Control   \n                                                    \n                                    type=\"email\"\n                                    placeholder =\"Enter Email\"\n                                    value = {email}\n                                    onChange = {(e) => setEmail(e.target.value)}\n                                > \n                                </Form.Control>\n                            </Form.Group>\n        \n                            <Form.Group controlId ='isadmin'>\n                                <Form.Check                  \n                                    type=\"checkbox\"\n                                    label =\"Is Admin\"\n                                    checked = {isAdmin}\n                                    onChange = {(e) => setAdmin(e.target.checked)}\n                                >  \n                                </Form.Check>\n                            </Form.Group>\n        \n                            <Button type='submit' variant='primary'>\n                                Update\n                            </Button>\n        \n                        </Form> \n    \n                        \n                    ) }\n            </FormContainer>\n        </div>\n    )\n}\n       "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}