{"ast":null,"code":"import * as constants from '../constants/productConstants';\nimport axios from 'axios';\n\n// list Product action : making API request and get product list.\nexport const listProducts = function () {\n  let keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return async dispatch => {\n    try {\n      dispatch({\n        type: constants.PRODUCT_LIST_REQUEST\n      });\n      const {\n        data\n      } = await axios.get(`/api/products/${keyword}`);\n      dispatch({\n        type: constants.PRODUCT_LIST_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      dispatch({\n        type: constants.PRODUCT_LIST_FAILED,\n        payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n      });\n    }\n  };\n};\nexport const listProductsDetails = id => async dispatch => {\n  try {\n    dispatch({\n      type: constants.PRODUCT_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`/api/products/${id}`);\n    dispatch({\n      type: constants.PRODUCT_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: constants.PRODUCT_DETAILS_FAILED,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};\nexport const listTopDetails = () => async dispatch => {\n  try {\n    dispatch({\n      type: constants.PRODUCT_TOP_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`/api/products/top`);\n    dispatch({\n      type: constants.PRODUCT_TOP_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: constants.PRODUCT_TOP_FAILED,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};\nexport const deleteProduct = id => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: constants.PRODUCT_DELETE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.delete(`/api/products/delete/${id}/`, config);\n    dispatch({\n      type: constants.PRODUCT_DELETE_SUCCESS\n    });\n  } catch (error) {\n    dispatch({\n      type: constants.PRODUCT_DELETE_FAILED,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};\nexport const createProduct = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: constants.PRODUCT_CREATE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.post(`/api/products/create/`, {}, config);\n\n    //send to reducer and update the state\n    dispatch({\n      type: constants.PRODUCT_CREATE_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: constants.PRODUCT_CREATE_FAILED,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};\nexport const updateProduct = product => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: constants.PRODUCT_UPDATE_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n    const {\n      data\n    } = await axios.put(`/api/products/update/${product._id}/`, product, config);\n\n    //send to reducer and update the state\n    dispatch({\n      type: constants.PRODUCT_UPDATE_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: constants.PRODUCT_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: constants.PRODUCT_UPDATE_FAILED,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};\nexport const createProductReview = (productId, review) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: constants.PRODUCT_CREATE_REVIEW_REQUEST\n    });\n    const {\n      userLogin: {\n        userInfo\n      }\n    } = getState();\n    const config = {\n      headers: {\n        'Content-type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    };\n\n    //in review there are rating and comment\n    const {\n      data\n    } = await axios.post(`/api/products/${productId}/reviews/`, review, config);\n\n    //send to reducer and update the state\n    dispatch({\n      type: constants.PRODUCT_CREATE_REVIEW_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: constants.PRODUCT_CREATE_REVIEW_FAILED,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};","map":{"version":3,"names":["constants","axios","listProducts","keyword","dispatch","type","PRODUCT_LIST_REQUEST","data","get","PRODUCT_LIST_SUCCESS","payload","error","PRODUCT_LIST_FAILED","response","detail","message","listProductsDetails","id","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_DETAILS_FAILED","listTopDetails","PRODUCT_TOP_REQUEST","PRODUCT_TOP_SUCCESS","PRODUCT_TOP_FAILED","deleteProduct","getState","PRODUCT_DELETE_REQUEST","userLogin","userInfo","config","headers","Authorization","token","delete","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_FAILED","createProduct","PRODUCT_CREATE_REQUEST","post","PRODUCT_CREATE_SUCCESS","PRODUCT_CREATE_FAILED","updateProduct","product","PRODUCT_UPDATE_REQUEST","put","_id","PRODUCT_UPDATE_SUCCESS","PRODUCT_UPDATE_FAILED","createProductReview","productId","review","PRODUCT_CREATE_REVIEW_REQUEST","PRODUCT_CREATE_REVIEW_SUCCESS","PRODUCT_CREATE_REVIEW_FAILED"],"sources":["/Users/richy_air/Documents/project/ecommerece/frontend/src/actions/productActions.js"],"sourcesContent":["import * as constants from '../constants/productConstants'\nimport axios from 'axios'\n\n// list Product action : making API request and get product list.\nexport const listProducts = (keyword = '') => async (dispatch) => {\n    try{\n        dispatch({type: constants.PRODUCT_LIST_REQUEST})\n\n        const {data} = await axios.get(`/api/products/${keyword}`)\n\n        dispatch({\n            type: constants.PRODUCT_LIST_SUCCESS,\n            payload: data})\n\n\n    }catch(error){\n\n        dispatch({\n            type: constants.PRODUCT_LIST_FAILED,\n            payload: error.response && error.response.data.detail\n                ? error.response.data.detail\n                : error.message\n\n        })\n\n    }\n}\n\n\nexport const listProductsDetails = (id) => async (dispatch) => {\n    try{\n        dispatch({type: constants.PRODUCT_DETAILS_REQUEST})\n\n        const {data} = await axios.get(`/api/products/${id}`)\n\n        dispatch({\n            type: constants.PRODUCT_DETAILS_SUCCESS,\n            payload: data})\n\n\n    }catch(error){\n\n        dispatch({\n            type: constants.PRODUCT_DETAILS_FAILED,\n            payload: error.response && error.response.data.detail\n                ? error.response.data.detail\n                : error.message\n\n        })\n\n    }\n}\n\n\n\nexport const listTopDetails = () => async (dispatch) => {\n    try{\n        dispatch({type: constants.PRODUCT_TOP_REQUEST})\n\n        const {data} = await axios.get(`/api/products/top`)\n\n        dispatch({\n            type: constants.PRODUCT_TOP_SUCCESS,\n            payload: data})\n\n\n    }catch(error){\n\n        dispatch({\n            type: constants.PRODUCT_TOP_FAILED,\n            payload: error.response && error.response.data.detail\n                ? error.response.data.detail\n                : error.message\n\n        })\n\n    }\n}\n\n\nexport const deleteProduct = (id) => async(dispatch, getState) => {\n    try{\n        dispatch({\n            type: constants.PRODUCT_DELETE_REQUEST,\n        })\n\n        const {\n            userLogin: { userInfo }\n        } = getState()\n\n        const config={\n            headers: {\n                'Content-type': 'application/json',\n                Authorization: `Bearer ${userInfo.token}` \n            }\n        }\n\n        const {data} = await axios.delete(\n            `/api/products/delete/${id}/`,\n            config\n        )\n        \n        dispatch({\n            type:constants.PRODUCT_DELETE_SUCCESS,\n        })\n\n    }catch(error){\n\n        dispatch({\n            type: constants.PRODUCT_DELETE_FAILED,\n            payload: error.response && error.response.data.detail\n                ? error.response.data.detail\n                : error.message\n\n        })\n    }\n}\n\n\n\nexport const createProduct = () => async(dispatch, getState) => {\n    try{\n        dispatch({\n            type: constants.PRODUCT_CREATE_REQUEST,\n        })\n\n        const {\n            userLogin: { userInfo }\n        } = getState()\n\n        const config={\n            headers: {\n                'Content-type': 'application/json',\n                Authorization: `Bearer ${userInfo.token}` \n            }\n        }\n\n        const {data} = await axios.post(\n            `/api/products/create/`,\n            {},\n            config\n        )\n        \n        //send to reducer and update the state\n        dispatch({\n            type:constants.PRODUCT_CREATE_SUCCESS,\n            payload: data,\n        })\n\n    }catch(error){\n\n        dispatch({\n            type: constants.PRODUCT_CREATE_FAILED,\n            payload: error.response && error.response.data.detail\n                ? error.response.data.detail\n                : error.message\n\n        })\n    }\n}\n\n\n\n\nexport const updateProduct = (product) => async(dispatch, getState) => {\n    try{\n        dispatch({\n            type: constants.PRODUCT_UPDATE_REQUEST,\n        })\n\n        const {\n            userLogin: { userInfo }\n        } = getState()\n\n        const config={\n            headers: {\n                'Content-type': 'application/json',\n                Authorization: `Bearer ${userInfo.token}` \n            }\n        }\n\n        const {data} = await axios.put(\n            `/api/products/update/${product._id}/`,\n            product,\n            config\n        )\n        \n        //send to reducer and update the state\n        dispatch({\n            type:constants.PRODUCT_UPDATE_SUCCESS,\n            payload: data,\n        })\n\n        dispatch({type: constants.PRODUCT_DETAILS_SUCCESS, \n                    payload: data})\n\n    }catch(error){\n\n        dispatch({\n            type: constants.PRODUCT_UPDATE_FAILED,\n            payload: error.response && error.response.data.detail\n                ? error.response.data.detail\n                : error.message\n\n        })\n    }\n}\n\n\n\n\nexport const createProductReview = (productId, review) => async(dispatch, getState) => {\n    try{\n        dispatch({\n            type: constants.PRODUCT_CREATE_REVIEW_REQUEST,\n        })\n\n        const {\n            userLogin: { userInfo }\n        } = getState()\n\n        const config={\n            headers: {\n                'Content-type': 'application/json',\n                Authorization: `Bearer ${userInfo.token}` \n            }\n        }\n\n        //in review there are rating and comment\n        const {data} = await axios.post(\n            `/api/products/${productId}/reviews/`,\n            review,\n            config\n        )\n        \n        //send to reducer and update the state\n        dispatch({\n            type:constants.PRODUCT_CREATE_REVIEW_SUCCESS,\n            payload: data,\n        })\n\n\n    }catch(error){\n\n        dispatch({\n            type: constants.PRODUCT_CREATE_REVIEW_FAILED,\n            payload: error.response && error.response.data.detail\n                ? error.response.data.detail\n                : error.message\n\n        })\n    }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}