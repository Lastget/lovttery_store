{"ast":null,"code":"import _slicedToArray from\"/Users/richy_air/Documents/project/ecommerece/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useSearchParams,useNavigate,useLocation}from'react-router-dom';import{Form,Button,Row,Col}from'react-bootstrap';import Loader from'../components/Loader';import Message from'../components/Message';import FormContainer from'../components/FormContainer';import{useDispatch,useSelector}from'react-redux';import{login}from'../actions/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginScreen(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];// const[searchParams, setSearchParams]= useSearchParams(); \n// const redirect = searchParams.get('redirect');\nvar location=useLocation();var navigate=useNavigate();var dispatch=useDispatch();var redirect=location.state?Number(location.state):'/';var userLogin=useSelector(function(state){return state.userLogin;});var error=userLogin.error,loading=userLogin.loading,userInfo=userLogin.userInfo;useEffect(function(){if(userInfo){navigate(redirect);}},[navigate,userInfo,redirect]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(login(email,password));};return/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Sign In \"}),error&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error,\" \"]}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Email Address \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Sign in\"})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{children:[\"New customer ?\",/*#__PURE__*/_jsx(Link,{to:redirect?\"/register?redirect=\".concat(redirect):'/register',children:\"Register\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","useSearchParams","useNavigate","useLocation","Form","Button","Row","Col","Loader","Message","FormContainer","useDispatch","useSelector","login","LoginScreen","email","setEmail","password","setPassword","location","navigate","dispatch","redirect","state","Number","userLogin","error","loading","userInfo","submitHandler","e","preventDefault","target","value"],"sources":["/Users/richy_air/Documents/project/ecommerece/backend/frontend/src/screens/LoginScreen.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Link, useSearchParams, useNavigate, useLocation } from 'react-router-dom'\nimport {Form, Button, Row, Col} from 'react-bootstrap'\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\nimport FormContainer from '../components/FormContainer'\nimport {useDispatch, useSelector } from 'react-redux'\nimport { login } from '../actions/userActions'\n\nexport default function LoginScreen() {\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n\n    // const[searchParams, setSearchParams]= useSearchParams(); \n    // const redirect = searchParams.get('redirect');\n\n    const location = useLocation()\n    const navigate = useNavigate(); \n    const dispatch = useDispatch()\n\n    const redirect = location.state? Number(location.state) : '/'\n    const userLogin = useSelector(state => state.userLogin)\n    const {error, loading, userInfo} = userLogin\n\n    useEffect(() => {\n        if(userInfo) {\n            navigate(redirect)\n        }\n    }, [navigate, userInfo, redirect])\n\n\n\n    const submitHandler = (e) => { \n        e.preventDefault()\n        dispatch(login(email,password))    \n    }\n\n  return (\n    <FormContainer>\n        <h1> Sign In </h1>\n        {error && <Message variant='danger'> {error} </Message>  }\n        {loading && <Loader />}\n        <Form onSubmit={submitHandler}> \n            <Form.Group controlId ='email'>\n                <Form.Label> Email Address </Form.Label>\n                <Form.Control                     \n                    type=\"email\"\n                    placeholder =\"Enter Email\"\n                    value = {email}\n                    onChange = {(e) => setEmail(e.target.value)}\n                > \n\n                </Form.Control>\n            </Form.Group>\n\n\n            <Form.Group controlId ='password'>\n                <Form.Label> Password </Form.Label>\n                <Form.Control                     \n                    type=\"password\"\n                    placeholder =\"Enter Password\"\n                    value = {password}\n                    onChange = {(e) => setPassword(e.target.value)}\n                >  \n\n                </Form.Control>\n            </Form.Group>\n\n\n            <Button type='submit' variant='primary'>\n                Sign in \n            </Button>\n        </Form>\n\n        <Row className='py-3'>\n            <Col>\n                New customer ?\n                     <Link to={redirect ? `/register?redirect=${redirect}` : '/register'}> \n                        Register \n                    </Link>\n            </Col>\n        </Row>\n\n    </FormContainer>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}