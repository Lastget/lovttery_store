{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useSearchParams,useNavigate,useLocation}from'react-router-dom';import{LinkContainer}from'react-router-bootstrap';import{Form,Button,Row,Col,Table}from'react-bootstrap';import Loader from'../components/Loader';import Message from'../components/Message';import Paginate from'../components/Paginate';import FormContainer from'../components/FormContainer';import{useDispatch,useSelector}from'react-redux';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import*as cons from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserListScreen(){var navigate=useNavigate();var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var productDelete=useSelector(function(state){return state.productDelete;});var loading_delete=productDelete.loading,error_delete=productDelete.error,success_delete=productDelete.success;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productCreate=useSelector(function(state){return state.productCreate;});var loading_create=productCreate.loading,error_create=productCreate.error,success_create=productCreate.success,createdProduct=productCreate.product;var location=useLocation();var keyword=location.search;useEffect(function(){dispatch({type:cons.PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){navigate('/login');}if(success_create){navigate(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts(keyword));}},[dispatch,userInfo,success_delete,success_create,createProduct,keyword]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure you want to delete this product? ')){// delete product\ndispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(){//create product \ndispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\" Product\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\",children:\"  \"}),\" Create Product\"]})})]}),loading_delete&&/*#__PURE__*/_jsx(Loader,{}),error_delete&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error_delete,\" \"]}),loading_create&&/*#__PURE__*/_jsx(Loader,{}),error_create&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error_create,\" \"]}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error,\" \"]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\" ID \"}),/*#__PURE__*/_jsx(\"th\",{children:\" NAME \"}),/*#__PURE__*/_jsx(\"th\",{children:\" PRICE \"}),/*#__PURE__*/_jsx(\"th\",{children:\" CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\" BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\" \"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",product._id,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",product.name,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" $\",product.price,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",product.category,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",product.brand,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,page:page,isAdmin:true})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","useSearchParams","useNavigate","useLocation","LinkContainer","Form","Button","Row","Col","Table","Loader","Message","Paginate","FormContainer","useDispatch","useSelector","listProducts","deleteProduct","createProduct","cons","UserListScreen","navigate","dispatch","productList","state","loading","error","products","page","pages","productDelete","loading_delete","error_delete","success_delete","success","userLogin","userInfo","productCreate","loading_create","error_create","success_create","createdProduct","product","location","keyword","search","type","PRODUCT_CREATE_RESET","isAdmin","_id","deleteHandler","id","window","confirm","createProductHandler","map","name","price","category","brand"],"sources":["/Users/richy_air/Documents/project/ecommerece/backend/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Link, useSearchParams, useNavigate, useLocation, } from 'react-router-dom'\nimport {LinkContainer} from 'react-router-bootstrap';\nimport {Form, Button, Row, Col, Table} from 'react-bootstrap'\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\nimport Paginate from '../components/Paginate'\nimport FormContainer from '../components/FormContainer'\nimport {useDispatch, useSelector } from 'react-redux'\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions'\nimport * as cons from '../constants/productConstants'\n\nexport default function UserListScreen() {\n    const navigate = useNavigate()\n    const dispatch = useDispatch() \n\n    const productList = useSelector(state => state.productList)\n    const {loading, error, products, page, pages} =  productList\n\n    const productDelete = useSelector(state => state.productDelete)\n    const {loading: loading_delete, error:error_delete,success: success_delete} =  productDelete\n\n    const userLogin = useSelector(state => state.userLogin)\n    const {userInfo} = userLogin\n\n    const productCreate = useSelector(state => state.productCreate)\n    const {loading: loading_create, error:error_create,success: success_create, product:createdProduct} =  productCreate\n\n    const location = useLocation()\n    let keyword = location.search\n\n    useEffect(() => {\n        dispatch({type: cons.PRODUCT_CREATE_RESET})\n\n        if(!userInfo.isAdmin){\n            navigate('/login')\n        }\n\n        if(success_create){\n            navigate(`/admin/product/${createdProduct._id}/edit`)\n        }else{\n            dispatch(listProducts(keyword))\n        }\n       \n    }, [dispatch, userInfo, success_delete, success_create, createProduct, keyword])\n\n    const deleteHandler = (id) => {\n\n        if (window.confirm('Are you sure you want to delete this product? ')){\n            // delete product\n            dispatch(deleteProduct(id))\n        }\n    }\n\n    const createProductHandler = () => {\n        //create product \n        dispatch(createProduct())\n\n    }\n    \n  return (\n    <div>\n        <Row className ='align-items-center'> \n            <Col> \n                <h1> Product</h1>\n            </Col>\n            <Col className='text-right'> \n                <Button className='my-3' onClick={createProductHandler}> \n                    <i className='fas fa-plus'>  </i> Create Product\n                </Button>\n            </Col>\n        </Row>\n\n        {loading_delete && <Loader/>} \n        {error_delete && <Message variant='danger'> {error_delete} </Message>  }\n        \n        {loading_create && <Loader/>} \n        {error_create && <Message variant='danger'> {error_create} </Message>  }\n\n        {loading \n            ? (<Loader/> )\n            : error\n                ?( <Message variant='danger'> {error} </Message>)\n                :(\n                    <div> \n                        <Table striped bordered hover className='table-sm'>\n                            <thead> \n                                <tr> \n                                    <th> ID </th>\n                                    <th> NAME </th>\n                                    <th> PRICE </th>\n                                    <th> CATEGORY</th>\n                                    <th> BRAND</th>\n                                    <th> </th>\n                                </tr>\n                            </thead> \n                            <tbody > \n                                \n                                {products.map(product =>(\n                                    <tr key = {product._id} >\n                                        <td> {product._id} </td> \n                                        <td> {product.name} </td> \n                                        <td> ${product.price} </td> \n                                        <td> {product.category} </td> \n                                        <td> {product.brand} </td> \n                                    \n                                        <td> \n                                            <LinkContainer to={`/admin/product/${product._id}/edit`}>\n                                                <Button variant='light' className='btn-sm'> \n                                                    <i className='fas fa-edit'></i>\n                                                </Button>\n\n                                            </LinkContainer>\n\n                                            <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(product._id)}> \n                                                    <i className='fas fa-trash'></i>\n                                            </Button>\n\n                                        </td>\n                                    </tr>\n\n                                ))}\n                                \n\n                            </tbody>\n\n                        </Table>\n                        <Paginate pages={pages} page={page} isAdmin={true} /> \n                    </div>\n                )\n        }\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}